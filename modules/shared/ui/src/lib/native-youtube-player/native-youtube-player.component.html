<div class="player-container">
  @if (!disablePlaceholder() && !isVideoPlaying()) {
    <ay-youtube-player-placeholder
      [videoId]="videoId()"
      [borderRadius]="borderRadius()"
      [isLoading]="false"
      [buttonLabel]="'Play Video'"
      [quality]="placeholderImageQuality()"
      [showPlayButton]="showPlayButton()"
      [boxShadow]="boxShadow()"
      (click)="playVideo()"
    />
  }
  <div
    class="player"
    [style.display]="!isVideoPlaying() && !disablePlaceholder() ? 'none' : ''"
    #videoPlayerContainer
    (mouseover)="onMouseEnter()"
    (mouseleave)="onMouseLeave()"
  >
    <video preload="auto" #videoPlayer>
      <source [src]="videoUrl()" type="video/mp4" />
    </video>
    <audio #audioPlayer [src]="audioUrl()"></audio>
    <div class="player_bottom" [style.display]="playerButtonsDisplay()">
      <div
        class="player_bottom_progress-bar-container"
        (mousedown)="onProgressBarMouseDown($event)"
      >
        <div class="progress-bar" #progressBar>
          <div
            class="progress-bar-loaded"
            [style.width.%]="loadedProgress()"
          ></div>
          <div
            class="progress-bar-played"
            [style.width.%]="playedProgress()"
          ></div>
          <div
            class="progress-bar-handle"
            [style.left.%]="playedProgress()"
          ></div>
        </div>
      </div>
      <div
        class="player_bottom_buttons-container"
        (click)="onButtonsContainerClick()"
      >
        <div class="player_bottom_buttons-left">
          <div class="player_bottom_button" (click)="toggleVideo()">
            <ay-text-icon-button
              [svgIcon]="playButtonIcon()"
              color="var(--white-color)"
              backgroundColor="transparent"
              hoverBackgroundColor="transparent"
              borderRadius="0px"
              [disabledRipple]="true"
              borderRadius="0px"
              [svgIconMarginLeft]="'0px'"
              [svgIconMarginRight]="'0px'"
              [iconPaddingLeft]="'0px'"
              [iconPaddingRight]="'0px'"
              [viewBox]="'8 8 20 20'"
            ></ay-text-icon-button>
          </div>

          <div class="player_bottom_button" (click)="nextVideo.emit()">
            <ay-text-icon-button
              [svgIcon]="'next'"
              color="var(--white-color)"
              backgroundColor="transparent"
              hoverBackgroundColor="transparent"
              borderRadius="0px"
              [disabledRipple]="true"
              borderRadius="0px"
              [svgIconMarginLeft]="'0px'"
              [svgIconMarginRight]="'0px'"
              [iconPaddingLeft]="'0px'"
              [iconPaddingRight]="'0px'"
              [viewBox]="'8 8 20 20'"
            ></ay-text-icon-button>
          </div>

          <div
            class="player_bottom_button volume_container"
            (wheel)="onVolumeSliderWheel($event)"
            (mouseenter)="onVolumeContainerMouseEnter()"
            (mouseleave)="onVolumeContainerMouseLeave()"
          >
            <div class="volume_icon">
              <ay-text-icon-button
                [svgIcon]="muteButtonIcon()"
                color="var(--white-color)"
                backgroundColor="transparent"
                hoverBackgroundColor="transparent"
                borderRadius="0px"
                [disabledRipple]="true"
                borderRadius="0px"
                [svgIconMarginLeft]="'0px'"
                [svgIconMarginRight]="'0px'"
                [iconPaddingLeft]="'0px'"
                [iconPaddingRight]="'0px'"
                [viewBox]="'8 8 20 20'"
                (click)="toggleMute()"
              ></ay-text-icon-button
            ></div>
            <div
              class="volume_slider_container"
              (mousedown)="onVolumeSliderMouseDown($event)"
              #volumeSlider
            >
              <div class="volume_slider"></div>
              <div class="volume_slider_level"></div>
              <div class="volume_slider_handle"></div>
            </div>
          </div>

          <div class="time-display">
            {{ currentTimeString() }} / {{ durationString() }}
          </div>
        </div>
        <div class="player_bottom_buttons-right">
          <div
            class="player_bottom_button mr-[14px]"
            (click)="toggleAutoNext()"
          >
            <div class="player_bottom_button--autonext">
              <div
                [class]="
                  autoNext()
                    ? 'player_bottom_button--autonext--enabled'
                    : 'player_bottom_button--autonext--disabled'
                "
              ></div>
            </div>
          </div>

          <div class="player_bottom_button">
            <ay-text-icon-button
              [svgIcon]="'subtitle'"
              color="var(--white-color)"
              backgroundColor="transparent"
              hoverBackgroundColor="transparent"
              borderRadius="0px"
              [disabledRipple]="true"
              borderRadius="0px"
              [svgIconMarginLeft]="'0px'"
              [svgIconMarginRight]="'0px'"
              [iconPaddingLeft]="'0px'"
              [iconPaddingRight]="'0px'"
              [viewBox]="'8 8 20 20'"
            ></ay-text-icon-button>
          </div>

          <div class="player_bottom_button">
            <ay-text-icon-button
              [svgIcon]="'player-settings'"
              color="var(--white-color)"
              backgroundColor="transparent"
              hoverBackgroundColor="transparent"
              borderRadius="0px"
              [disabledRipple]="true"
              borderRadius="0px"
              [svgIconMarginLeft]="'0px'"
              [svgIconMarginRight]="'0px'"
              [iconPaddingLeft]="'0px'"
              [iconPaddingRight]="'0px'"
              [viewBox]="'8 8 20 20'"
            ></ay-text-icon-button>
          </div>

          <div class="player_bottom_button">
            <ay-text-icon-button
              [svgIcon]="'player-mini'"
              color="var(--white-color)"
              backgroundColor="transparent"
              hoverBackgroundColor="transparent"
              borderRadius="0px"
              [disabledRipple]="true"
              borderRadius="0px"
              [svgIconMarginLeft]="'0px'"
              [svgIconMarginRight]="'0px'"
              [iconPaddingLeft]="'0px'"
              [iconPaddingRight]="'0px'"
              [viewBox]="'6 6 24 24'"
            ></ay-text-icon-button>
          </div>

          @if (screenMode() === ScreenMode.Default) {
            <div class="player_bottom_button" (click)="toggleViewMode()">
              <ay-text-icon-button
                [svgIcon]="viewModeIcon()"
                color="var(--white-color)"
                backgroundColor="transparent"
                hoverBackgroundColor="transparent"
                borderRadius="0px"
                [disabledRipple]="true"
                borderRadius="0px"
                [svgIconMarginLeft]="'0px'"
                [svgIconMarginRight]="'0px'"
                [iconPaddingLeft]="'0px'"
                [iconPaddingRight]="'0px'"
                [viewBox]="'8 8 20 20'"
              ></ay-text-icon-button>
            </div>
          }

          <div class="player_bottom_button" (click)="toggleScreenMode()">
            @if (screenMode() === ScreenMode.Default) {
              <ay-svg-button-renderer>
                <ng-template aySvgButtonTmp>
                  <svg
                    viewBox="0 0 36 36"
                    preserveAspectRatio="xMidYMid meet"
                    focusable="false"
                    class="pointer-events-none block w-[42px]"
                  >
                    <g class="ytp-fullscreen-button-corner-0">
                      <path
                        d="m 10,16 2,0 0,-4 4,0 0,-2 L 10,10 l 0,6 0,0 z"
                        [style.fill]="'white'"
                      ></path>
                    </g>
                    <g class="ytp-fullscreen-button-corner-1">
                      <path
                        d="m 20,10 0,2 4,0 0,4 2,0 L 26,10 l -6,0 0,0 z"
                        [style.fill]="'white'"
                      ></path>
                    </g>
                    <g class="ytp-fullscreen-button-corner-2">
                      <path
                        d="m 24,24 -4,0 0,2 L 26,26 l 0,-6 -2,0 0,4 0,0 z"
                        [style.fill]="'white'"
                      ></path>
                    </g>
                    <g class="ytp-fullscreen-button-corner-3">
                      <path
                        d="M 12,20 10,20 10,26 l 6,0 0,-2 -4,0 0,-4 0,0 z"
                        [style.fill]="'white'"
                      ></path>
                    </g>
                  </svg>
                </ng-template>
              </ay-svg-button-renderer>
            } @else {
              <ay-svg-button-renderer>
                <ng-template aySvgButtonTmp>
                  <svg
                    viewBox="0 0 36 36"
                    preserveAspectRatio="xMidYMid meet"
                    focusable="false"
                    class="pointer-events-none block w-[42px]"
                  >
                    <g class="ytp-fullscreen-button-corner-0">
                      <path
                        d="m 14,14 -4,0 0,2 6,0 0,-6 -2,0 0,4 0,0 z"
                        [style.fill]="'white'"
                      ></path>
                    </g>
                    <g class="ytp-fullscreen-button-corner-1">
                      <path
                        d="m 22,14 0,-4 -2,0 0,6 6,0 0,-2 -4,0 0,0 z"
                        [style.fill]="'white'"
                      ></path>
                    </g>
                    <g class="ytp-fullscreen-button-corner-2">
                      <path
                        d="m 20,26 2,0 0,-4 4,0 0,-2 -6,0 0,6 0,0 z"
                        [style.fill]="'white'"
                      ></path>
                    </g>
                    <g class="ytp-fullscreen-button-corner-3">
                      <path
                        d="m 10,22 4,0 0,4 2,0 0,-6 -6,0 0,2 0,0 z"
                        [style.fill]="'white'"
                      ></path>
                    </g>
                  </svg>
                </ng-template>
              </ay-svg-button-renderer>
            }
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
